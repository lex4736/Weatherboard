function initPage(){var e=document.getElementById("city-input");const t=document.getElementById("search-button"),n=document.getElementById("clear-history"),d=document.getElementById("city-name"),r=document.getElementById("current-pic"),c=document.getElementById("temperature"),l=document.getElementById("humidity"),s=document.getElementById("wind-speed"),m=document.getElementById("UV-index"),a=document.getElementById("history");let o=JSON.parse(localStorage.getItem("search"))||[];console.log(o);const p="c9a9ed03a355403f4cb9a36e931c0b4a";function u(t){t="https://api.openweathermap.org/data/2.5/weather?q="+t+"&appid="+p;axios.get(t).then(function(t){console.log(t);const e=new Date(1e3*t.data.dt);console.log(e);var n=e.getDate(),a=e.getMonth()+1,o=e.getFullYear();d.innerHTML=t.data.name+" ("+a+"/"+n+"/"+o+") ";o=t.data.weather[0].icon;r.setAttribute("src","https://openweathermap.org/img/wn/"+o+"@2x.png"),r.setAttribute("alt",t.data.weather[0].description),c.innerHTML="Temperature: "+g(t.data.main.temp)+" &#176F",l.innerHTML="Humidity: "+t.data.main.humidity+"%",s.innerHTML="Wind Speed: "+t.data.wind.speed+" MPH";o="https://api.openweathermap.org/data/2.5/uvi/forecast?lat="+t.data.coord.lat+"&lon="+t.data.coord.lon+"&appid="+p+"&cnt=1";axios.get(o).then(function(t){let e=document.createElement("span");e.setAttribute("class","badge badge-danger"),e.innerHTML=t.data[0].value,m.innerHTML="UV Index: ",m.append(e)});t="https://api.openweathermap.org/data/2.5/forecast?id="+t.data.id+"&appid="+p;axios.get(t).then(function(t){console.log(t);const e=document.querySelectorAll(".forecast");for(i=0;i<e.length;i++){e[i].innerHTML="";var n=8*i+4;const r=new Date(1e3*t.data.list[n].dt);var a=r.getDate(),o=r.getMonth()+1,d=r.getFullYear();const c=document.createElement("p");c.setAttribute("class","mt-3 mb-0 forecast-date"),c.innerHTML=o+"/"+a+"/"+d,e[i].append(c);const l=document.createElement("img");l.setAttribute("src","https://openweathermap.org/img/wn/"+t.data.list[n].weather[0].icon+"@2x.png"),l.setAttribute("alt",t.data.list[n].weather[0].description),e[i].append(l);const s=document.createElement("p");s.innerHTML="Temp: "+g(t.data.list[n].main.temp)+" &#176F",e[i].append(s);const m=document.createElement("p");m.innerHTML="Humidity: "+t.data.list[n].main.humidity+"%",e[i].append(m)}})})}function g(t){return Math.floor(1.8*(t-273.15)+32)}function h(){a.innerHTML="";for(let t=0;t<o.length;t++){const e=document.createElement("input");e.setAttribute("type","text"),e.setAttribute("readonly",!0),e.setAttribute("class","form-control d-block bg-white"),e.setAttribute("value",o[t]),e.addEventListener("click",function(){u(e.value)}),a.append(e)}}t.addEventListener("click",function(){var t=e.value;u(t),o.push(t),localStorage.setItem("search",JSON.stringify(o)),h()}),n.addEventListener("click",function(){o=[],h()}),h(),0<o.length&&u(o[o.length-1])}initPage();